# devops-netology
## Задача 1

Опишите кратко, в чём основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
### Ответ: 
- Аппаратная виртуализация позволяет получить доступ гостевым ОС виртуальных машин напрямую к ресурсам сервера, так как не требуется установка промежуточного звена в виде хостовой ОС. Ее функции  в части управления виртуальными машинами берет на себя гипервизор. Аппаратная виртуализация возможна только при использовании процессоров, имеющих встроенные инструкции для поддержки виртуализации.
- Для паравиртуализации необходима хостовая ОС. Через нее гипервизор распределяет доступ гостевых ОС виртуальных машин к аппаратным ресурсам физического сервера. Не требует поддержки на уровне процессора, а значит может быть использована на домашних ПК и старых серверах.
- Виртуализация на основе ОС не требует отдельного гипервизора так как сама выполняет его функцию. В качестве ОС виртуальных машин нельзя использовать ОС, отличные от хостовой ОС, но сами виртуальные машины (контейнеры) получаются более легковесными и быстроразворачивающимися. При выходе из строя физического сервера высок риск потери всех контейнеров.


## Задача 2

Выберите один из вариантов использования организации физических серверов в зависимости от условий использования.

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- высоконагруженная база данных, чувствительная к отказу;
- различные web-приложения;
- Windows-системы для использования бухгалтерским отделом;
- системы, выполняющие высокопроизводительные расчёты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.
### Ответ:
- высоконагруженная база данных, чувствительная к отказу;
 
Мой выбор - физические сервера. Здесь требуется создание отказоустойчивого дискового массива для базы данных, доступ к которому СУБД должна иметь максимально скоростной и без промежуточных звеньев, распределяющих доступ к ресурсам.
- различные web-приложения;

Здесь можно использовать виртуализацию на основе ОС так как требуется быстрое развертывание, изолированность и необходимость эффективно использовать один сервер для большого количества приложений, например, для хостинга сайтов.
- Windows-системы для использования бухгалтерским отделом;

Здесь требуется создание терминальных и файловых серверов. Для этого эффективней использовать аппаратную или паравиртуализацию. Можно выбрать для разных задач разные ОС в качестве гостевых. Нет необходимости использовать кластеризацию. Достаточно организовать резервное копирование, что дешевле кластера серверов, и выход из строя хост-сервера не будет являться фатальным для организации. 
- системы, выполняющие высокопроизводительные расчёты на GPU.

Здесь можно использовать виртуализацию уровня ОС. На хост-сервере должны быть установлены необходимые драйвера. При использовании специализированных серверных видеокарт (NVIDIA Tesla, например) можно организовать облачные вычисления в области машинного обучения, медицины, бизнес-аналитики итп.


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
### Ответ:
- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

Подойдет VMware vSphere. Одинаково хорошо работает с Linux и Windows гостевыми ОС. Существует программный балансировщик нагрузки vSphere DRS, система репликации данных vSphere Replication и система автоматизированного создания резервных копий с использованием технологии Data Protection. Решение не бесплатное, но по условию задачи это не важно.
- Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

Подойдет XEN в режиме паравиртуализации, так как именно режим PV наиболее производителен и стабилен для гостевой Windows системы. 
- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.

Подойдет Windows Hyper-V Server 2019. Он бесплатен, максимально совместим с Windows гостевыми ОС.
- Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Подойдет KVM. Он поддерживает аппаратную виртуализацию. Компонент ядра, необходимый для работы KVM, включён в основную ветку ядра Linux с 2007 года.


## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
### Ответ:
У гетерогенной среды виртуализации я бы выделил следующие проблемы: 
1. Полная или частичная несовместимость форматов виртуальных машин. Если возникнет необходимость миграции между хостами с разными системами виртуализации в лучшем случае нужно будет преобразовывать ВМ в другой формат с помощью специализированных утилит, в худшем случае это вообще будет невозможно сделать. Пример:  лично приходилось переносить ВМ из VirtualBox в VMware ESXi 5.0. Процесс потребовал длительного штудирования профильных форумов в течение нескольких дней. С четвертого раза получилось.
2. Необходимость держать в штате несколько специалистов с компетенциями в разных системах виртуализации.


Дли минимизации этих проблем необходимо постепенно перевести инфраструктуру либо на одну систему виртуализации, либо иметь не более двух систем, между которыми можно будет при необходимости перемещать виртуальные машины. Также следует развивать у инженерного персонала компетенции в нескольких системах виртуализации с целью их (персонала) взаимозаменяемости. 
 
При наличии выбора, я бы не стал создавать гетерогенную среду виртуализации, но в реальности такое бывает редко и приходится работать с тем, что есть в наличии.
